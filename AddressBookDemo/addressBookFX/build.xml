<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="build_and_jar" name="Build and Package AddressBookFX" basedir=".">
	<!--  ***********************************  -->
	<!--  * Property initialisation         *  -->
	<!--  ***********************************  -->
	<property name="dist" value="${basedir}/dist"/>
	<property name="src" value="${basedir}/src"/>
	<property name="bin" value="${basedir}/bin"/>
	<property name="lib" value="${basedir}/lib"/>
	<property name="resources" location="${basedir}/resources"/>
	<property name="classpath" value="${lib}/addressbookjvm.jar;${lib}/addressbookwrapper.jar"/>
	
	<!--  ***********************************  -->
	<!--  * Targets                         *  -->
	<!--  ***********************************  -->
	<target name="build_and_jar" depends="copy_dependency,build,create_jar"/>
	
	<!-- copy the dependency jars from the other two projects into the lib folder of the current project -->	
	<target name="copy_dependency">
		<mkdir dir="${lib}"/>
		<copy file="../addressBookJVM/dist/addressbookjvm.jar" todir="${lib}"/>
		<copy file="../addressBookWrapper/dist/addressbookwrapper.jar" todir="${lib}"/>
	</target>
	
	<!-- build the project using the autogenerated .cobolBuild file -->
	<target name="build">
		<mkdir dir="${bin}"/>
		<javac srcdir="${src}" destdir="${bin}" classpath="${classpath}"/>
	</target>
	
	<!-- put all produce files in the bin folder into a jar -->
	<target name="create_jar">
		<mkdir dir="${dist}"/>
		<jar destfile="${dist}/addressbookfx.jar">
	        <fileset dir="${bin}"/>
			<fileset dir="${src}">
			    <exclude name="**/*.java"/>
    		</fileset>
			<fileset dir="${resources}">
			    <exclude name="**/*.java"/>
			</fileset>
		</jar>
	</target>
	
	<!-- clean the bin folder and the created jar file -->
	<target name="clean">
		<delete dir="${bin}"/>
		<delete dir="${lib}"/>
		<delete dir="${dist}"/>
	</target>
	
</project>